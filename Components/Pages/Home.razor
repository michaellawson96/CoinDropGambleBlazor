@page "/"
@using System.ComponentModel
@using CoinDropGamble.Models.Enums
@using CoinDropGamble.Helpers
@rendermode InteractiveServer

<PageTitle>Coin Drop Gamble</PageTitle>

@if (!_isGameStarted)
{
    <div class="d-flex flex-column justify-content-center align-items-center vh-100 background">
        <div class="card text-center text-white bg-dark shadow-lg">
            <div class="card-body">
                <h3 class="card-title">Welcome to Coin Drop Gamble</h3>
                <p class="card-text">
                    Enter a high-stakes game where every coin counts. 
                    Manage your chances, outsmart your opponent, and 
                    survive the gamble.
                </p>
                <button class="btn btn-warning btn-lg" @onclick="StartGame">Start Game</button>
            </div>
        </div>
    </div>
}
else
{
    <div class="container py-4">
    <div class="row g-4">
        <!-- Capacity Section on top of image section -->
        <div class="col-lg-4 d-flex flex-column">
            <div class="card text-center text-white bg-dark shadow-lg section-card flex-fill">
                <div class="card-body capacity-section">
                    <h3 class="card-title">18 - 22</h3>
                </div>
            </div>
            <div class="card text-center text-white bg-dark shadow-lg section-card flex-fill image-section">
                <img src="images/piggy-bank-towards-viewer.jpeg" class="card bg-dark"/>
            </div>
        </div>

        <!-- Description Section -->
        <div class="col-lg-8 d-flex flex-column">
            <div class="card text-center text-white bg-dark shadow-lg section-card flex-fill">
                <div class="card-body description-section">
                    <h3 class="card-title">Description Section</h3>
                    <p class="card-text">Game outcomes and tutorials.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container py-4">
    <div class="row g-4">
        <!-- Action Section -->
        <div class="col-6 d-flex flex-column">
            <div class="card text-center text-white bg-dark shadow-lg section-card flex-fill">
                <div class="card-body action-section">
                    <div class="row">
                        <button class="btn btn-warning btn-lg col-12 my-1" @onclick="DropCoin">Coin 3/3</button>
                        <button class="btn btn-warning btn-lg col-12 my-1 " @onclick="Shake">Shake</button>
                        <button class="btn btn-warning btn-lg col-12  my-1 " @onclick="Extra">Special</button>
                        <button class="btn btn-warning btn-lg col-12  my-1 " @onclick="Extra">End Turn</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Status Section -->
        <div class="col-6 d-flex flex-column">
            <div class="card text-center text-white bg-dark shadow-lg section-card flex-fill">
                <div class="card-body status-section">
                    
                    <p class="card-text">YOUR TURN</p>
                    <p class="card-text">Your HP: 3</p>
                    <p class="card-text">Your $: 33</p>
                    <p class="card-text">Their HP: 3</p>
                    <p class="card-text">Their $: 33</p>
                    <p class="card-text">Games Won: 0</p>
                </div>
            </div>
        </div>
    </div>
</div>


}

@code {
    private const int MAX_COINS_PLAYABLE = 3;
    private int _piggyBankCapacity;
    private int _playerHealthCount;
    private int _opponentHealthCount;
    private int _currentRoundMaxHealth;
    private int _gamesWon;
    private bool _isGameStarted = false;
    private bool _isFirstGame = true;
    private bool _isRegularPiggyBank;
    private bool _hasPlayerShakenThisGame;
    private bool _hasOpponentShakenThisGame;
    private bool _isPlayersTurn;
    private List<SpecialCoins> _playerSpecialCoins = new();
    private List<SpecialCoins> _opponentSpecialCoins = new();
    private List<SpecialCoins> _specialCoinShopItems = new();

    private void StartGame()
    {
        _isGameStarted = true;
        InvokeAsync(StateHasChanged);
    }

    private void NewRound() { }
    private void NewTurn() { }

    private void DropCoin() { }
    private void Shake() { }
    private void Extra() { }
}
